---
title: "–£—Ä–æ–∫ 2 - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram –±–æ—Ç–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ Django"
created: 2025-08-23
modified: 2025-08-23
---

# üìñ –£—Ä–æ–∫ 2 - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Telegram –±–æ—Ç–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ Django

## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ [[–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç|–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞]] –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ [[Django]] –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

## üéØ –¶–µ–ª–∏ —É—Ä–æ–∫–∞
<!-- –ß—Ç–æ –∏–∑—É—á–∏–º -->

## üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
<!-- –ß—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è -->

## üìù –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ [[–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç|–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞]] –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ [[Django]]

**1. –£–ª—É—á—à–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–∏ `TelegramUser` –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**

–ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–∏ –Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –ö–æ–¥ –≤ `admin.py`:
```python

from django.contrib import admin

from telegram.models import TelegramUser

  

@admin.register(TelegramUser)

class TelegramUserAdmin(admin.ModelAdmin):

¬† ¬† list_display = ('user_id', 'username', 'first_name', 'last_name', 'is_bot', 'is_active', 'created_at', 'updated_at')

¬† ¬† search_fields = ('user_id', 'username', 'first_name', 'last_name')

¬† ¬† list_filter = ('language_code', 'is_bot', 'is_active', 'created_at', 'updated_at')
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
‚Ä¢ list_display: —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∑–∞–ø–∏—Å–µ–π –≤ –∞–¥–º–∏–Ω–∫–µ.
‚Ä¢ search_fields: –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–æ–ª—è–º.
‚Ä¢ list_filter: –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–µ–π –ø–æ –ø–æ–ª—è–º.


**2. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É management/commands –∏ —Ñ–∞–π–ª runbot.py**
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
mkdir -p telegram/management/commands
touch telegram/management/commands/__init__.py
touch telegram/management/commands/runbot.py
```

**3. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É handlers –∏ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
mkdir telegram/handlers
touch telegram/handlers/__init__.py
touch telegram/handlers/commands_handlers.py
touch telegram/handlers/message_handlers.py
touch telegram/handlers/callback_handlers.py
```

**4. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É keyboard**
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
mkdir telegram/keyboard
touch telegram/keyboard/__init__.py
```

**5. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª main.py –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–ø–∫–µ**
–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
touch telegram/main.py
```


**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞**
**6. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ settings.py**
–í —Ñ–∞–π–ª–µ settings.py –¥–æ–±–∞–≤–∏—Ç—å:
```python
# SECURITY WARNING: Telegram bot token
TELEGRAM_BOT_TOKEN = '–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞'
```

**–ö–æ–¥ –±–æ—Ç–∞**
**7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∞–π–ª main.py**
```python
from django.conf import settings
from telebot import TeleBot
from telegram.handlers import commands_handlers

bot = TeleBot(token=settings.TELEGRAM_BOT_TOKEN, parse_mode='HTML')

def main():
    commands_handlers.register_commands(bot)
    print('–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω...')
    bot.polling(none_stop=True)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
‚Ä¢ settings.TELEGRAM_BOT_TOKEN: –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Django.
‚Ä¢ register_commands(bot): —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥.
‚Ä¢ bot.polling(): –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**8. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∞–π–ª runbot.py**
```python
from django.core.management.base import BaseCommand
from telegram.main import main

class Command(BaseCommand):
    help = '–ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞'

    def handle(self, *args, **options):
        try:
            main()
        except (KeyboardInterrupt, SystemExit):
            print('–ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω...')
        except Exception as e:
            print(f'–ë–æ—Ç —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π: {e}')
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–≤—è–∑–∏:**
‚Ä¢ BaseCommand: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–æ–º–∞–Ω–¥—ã Django (runbot).
‚Ä¢ main(): –∑–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –±–æ—Ç–∞.
‚Ä¢ –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π:
```bash
python manage.py runbot
```

**9. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ commands_handlers.py**
```python
from telebot import TeleBot
from telebot.types import Message
from telegram.models import TelegramUser

bot = None

def register_commands(bot_instance: TeleBot):
    global bot
    bot = bot_instance
    bot.register_message_handler(start, commands=['start'])

def start(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start."""
    model_user, created = TelegramUser.objects.get_or_create(user_id=message.from_user.id)
    
    if created:
        model_user.username = message.from_user.username
        model_user.first_name = message.from_user.first_name
        model_user.last_name = message.from_user.last_name
        model_user.language_code = message.from_user.language_code
        model_user.is_bot = message.from_user.is_bot
        model_user.save()
        bot.reply_to(message, f"–ü—Ä–∏–≤–µ—Ç {model_user.first_name}! –Ø –ø—Ä–æ—Å—Ç–æ–π –±–æ—Ç. –ö–∞–∫ —è –º–æ–≥—É –ø–æ–º–æ—á—å?")
    else:
        bot.reply_to(message, f"–ü—Ä–∏–≤–µ—Ç {model_user.first_name}! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å —Å–Ω–æ–≤–∞!")
```
**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
‚Ä¢ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–æ–≤—ã–π, —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
‚Ä¢ –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## üíª –ü—Ä–∞–∫—Ç–∏–∫–∞
<!-- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è -->

## üîó –°–≤—è–∑–∏
<!-- –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —É—Ä–æ–∫–∞–º–∏ -->

## üìå –ó–∞–º–µ—Ç–∫–∏
<!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ -->

## üè∑Ô∏è –¢–µ–≥–∏
#do_it #—É—Ä–æ–∫ #django #python #telegram #–±–æ—Ç #–æ–±—É—á–µ–Ω–∏–µ

---

